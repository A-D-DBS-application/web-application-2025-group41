<!DOCTYPE html>
<html lang="{{ session.get('lang', 'nl') }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mijn aanvragen</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/aanvragen.css') }}">
</head>
<body>

<h1>Overzicht van uw aanvragen</h1>

<table id="tabel">
  <thead>
    <tr>
      <th>Datum</th>
      <th>Totaal gewicht RMA</th>
      <th>Aantal WIVA-vaten</th>
      <th>Huidige kost/jaar</th>
      <th>Type Machine</th> <th>Terugverdientijd</th> </tr>
  </thead>
  <tbody>
    {% for req in requests %}
      {% if req.waste_profile %}
      <tr>
        <td>{{ req.created_at.strftime('%d/%m/%Y') }}</td>
        <td>{{ req.waste_profile.hmw_total_weight }} kg</td>
        <td>{{ req.waste_profile.number_of_barrels_1 }}</td>
        <td>€ {{ req.waste_profile.cost_hmw_barrels_1 }}</td>

        <td>
            {% if req.machine_size_calc and req.machine_size_calc.machine %}
                <strong>{{ req.machine_size_calc.machine.size_code }}</strong>
            {% else %}
                <span style="color:grey;">-</span>
            {% endif %}
        </td>

        <td>
            {% if req.payback_period_calc and req.payback_period_calc.payback_months %}
                <strong>{{ (req.payback_period_calc.payback_months / 12) | round(1) }} jaar</strong>
            {% else %}
                 <span style="color:grey;">-</span>
            {% endif %}
        </td>

      </tr>
      {% endif %}
    {% else %}
      <tr>
        <td colspan="6" style="text-align:center;">Geen aanvragen gevonden.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<a class="back" href="{{ url_for('main.dashboard') }}">← Terug naar dashboard</a>

</body>
</html>
